{
  "builders": [
    {
      "type": "docker",
      "image": "centos:7.2.1511",
      "commit": true,
      "run_command": [
        "-d",
        "-i",
        "-t",
        "--expose=8080"
        "{{.Image}}",
        "/usr/sbin/init"
      ]
    }
  ],

  "provisioners":
  [
    {
      "type": "chef-solo",
      "skip_install": "false",
      "prevent_sudo": "true",
      "cookbook_paths": ["/tmp/cookbooks"],
      "json": {
        "java": {
          "install_flavor": "oracle",
          "oracle": {
            "accept_oracle_download_terms": "true"
          },
          "jdk_version": "8"
        },
        "jenkins": {
          "master": {
            "install_method": "package"
          }
        }
      },
      "run_list": [
        "recipe[java]",
        "recipe[jenkins::master]"
      ]
    }
  ],

  "post-processors":
  [
    [
      {
        "type": "docker-tag",
        "repository": "gsebast/centos7-jenkins",
        "tag": "0.1"
      },
      {
        "type": "docker-push"
      }
    ]
  ]
}
